<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Ciker's Blog."><meta name="keywords" content="å®‰å…¨,web,misc"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.4"><title>HFish èœœç½ä½¿ç”¨å¿ƒå¾— | ciker</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">HFish èœœç½ä½¿ç”¨å¿ƒå¾—</h1><a id="logo" href="/.">ciker</a><p class="description">0hex</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="æœç´¢"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">HFish èœœç½ä½¿ç”¨å¿ƒå¾—</h1><div class="post-meta"><a href="/2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/#comments" class="comment-count"><i id="changyan_count_unit" data-xid="2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/"></i>ç•™è¨€,<i id="changyan_parti_unit" data-xid="2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/"></i>å‚ä¸</a><p><span class="date">Nov 15, 2019</span><span><a href="/categories/èœœç½/" class="category">èœœç½</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>ç‚¹å‡»</i></i></span></p></div><div class="post-content"><p>(æœ¬ç¯‡é¦–å‘äº <a href="https://www.freebuf.com/vuls/220646.html" target="_blank" rel="noopener">https://www.freebuf.com/vuls/220646.html</a>)</p>
<p>æœ€è¿‘æ­å»ºå„ç§èœœç½æµ‹è¯•ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†äº« HFish V0.4 ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›å¿ƒå¾—ã€‚</p>
<h1 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h1><h2 id="å•èŠ‚ç‚¹éƒ¨ç½²"><a href="#å•èŠ‚ç‚¹éƒ¨ç½²" class="headerlink" title="å•èŠ‚ç‚¹éƒ¨ç½²"></a>å•èŠ‚ç‚¹éƒ¨ç½²</h2><p>å•ç‚¹éƒ¨ç½²å®˜æ–¹æ–‡æ¡£ä»‹ç»å·²ç»å¾ˆå…¨é¢äº†ï¼Œä¸è¿‡windows å®¶åº­ç‰ˆdockerç‰ˆéƒ¨ç½²æœ‰ç‚¹å‘éœ€è¦æ³¨æ„çš„ã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/systeminfo.png" alt="systeminfo" title="systeminfo"></p>
<p>å®¶åº­ç‰ˆæ˜¯ä¸èƒ½ç›´æ¥å®‰è£…dockerï¼Œéœ€è¦å®‰è£…docker tool box ï¼ŒåŸç†æ˜¯å¼€å¯vbox çš„linuxè™šæ‹Ÿæœºï¼Œç„¶ååœ¨linuxè™šæ‹Ÿæœºé‡Œé¢å®‰è£…dockerï¼Œæ‰€ä»¥ï¼Œåœ¨å¯ç”¨dockerå®¹å™¨çš„æ—¶å€™ï¼Œå¦‚æœæŒ‡å®š -p 127.0.0.1:22:22 ç‰©ç†æœºæ˜¯æ— æ³•è®¿é—®èœœç½ï¼Œåªèƒ½æŠŠå®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°0.0.0.0çš„åœ°å€ä¸Šï¼Œç‰©ç†æœºæ‰å¯ä»¥è®¿é—®ã€‚</p>
<p>eg:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 2222:22 -p 23:23 -p 9001:9001 -e USERNAME=god -e PASSWORD=123456 --name hfish imdevops/hfish:latest</span><br></pre></td></tr></table></figure>

<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/23.bmp" alt="win docker" title="win docker run"></p>
<p>ç„¶åè¿›å…¥linuxè™šæ‹Ÿæœºé‡Œé¢ï¼ŒæŸ¥çœ‹è™šæ‹Ÿæœºå…·ä½“çš„ipåœ°å€</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/24.bmp" alt="linux ifconfig" title="linux ifconfig"></p>
<p>æˆåŠŸè®¿é—®</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/25.bmp" alt="win master" title="win master"></p>
<h2 id="åˆ†å¸ƒå¼éƒ¨ç½²"><a href="#åˆ†å¸ƒå¼éƒ¨ç½²" class="headerlink" title="åˆ†å¸ƒå¼éƒ¨ç½²"></a>åˆ†å¸ƒå¼éƒ¨ç½²</h2><p>ä¸ºäº†èƒ½å°½å¯èƒ½å…¨çš„æ”¶é›†å…¨çƒæ”»å‡»æ•°æ®ï¼Œè¿™æ¬¡è®¡åˆ’é‡‡ç”¨åˆ†å¸ƒå¼éƒ¨ç½²æ–¹å¼ã€‚ä½¿ç”¨vpsä¾›åº”å•†ä¸º vultr ï¼ŒIDCæœºæˆ¿åˆ†å¸ƒå¦‚ä¸‹å›¾</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/1.bmp" alt="IDCæœºæˆ¿åˆ—è¡¨" title="IDCæœºæˆ¿åˆ—è¡¨"></p>
<p>åˆ—è¡¨ä¸­æœ‰9ä¸ªå›½å®¶ï¼Œubuntu ç³»ç»Ÿæœ€ä½é…ç½®æ¯ä¸ªæœˆ5ç¾å…ƒï¼Œæ¯ä¸ªå›½å®¶ä¸€å°vps deploy ä¹Ÿæ²¡å¤šå°‘é’±ã€‚è¿™è¾¹æœ‰ä¸ªæ³¨æ„ç‚¹å°±æ˜¯ï¼Œåœ¨deployæ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ è‡ªå·±çš„ssh keyï¼Œè¿™æ ·åé¢ç®¡ç†vpsä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘å¿˜äº†æˆ‘çš„ssh key çš„å¯†ç äº†ï¼Œå°±ç›´æ¥ç”¨è´¦æˆ·å¯†ç ç®¡ç†ã€‚vpsè¿‡å¤šï¼Œç®¡ç†èµ·æ¥æŒºéº»çƒ¦çš„ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨python3 çš„ paramiko  è‡ªåŠ¨åŒ–ä¸€é”®é…ç½®ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<p>åˆå§‹åŒ–æœåŠ¡å™¨ï¼Œå¹¶å®‰è£…docker.io ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/2.bmp" alt="åˆå§‹åŒ–" title="åˆå§‹åŒ–"></p>
<p>å¯åŠ¨ docker å®¹å™¨ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/3.bmp" alt="å¯åŠ¨docker" title="å¯åŠ¨docker"></p>
<p><em>å®˜æ–¹åˆ†å¸ƒå¼éƒ¨ç½²å‘½ä»¤ä¼šå°‘äº›ç«¯å£ï¼Œå¯ä»¥æ ¹æ® config.ini ç«¯å£è‡ªè¡Œå¢åˆ </em></p>
<p><em>è¿™è¾¹è¿˜æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå›½å†…è®¿é—®å›½å¤–æœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šä¸¢åŒ…ï¼Œæœ€å¥½æ˜¯åœ¨å…¶ä¸­ä¸€å°vpsä¸Šé¢æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬</em></p>
<p>è¿è¡Œå®Œåï¼ŒæŸ¥çœ‹ä¸»èŠ‚ç‚¹ï¼ŒæˆåŠŸæ¥æ”¶åˆ°æ•°æ®</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/4.bmp" alt="ä¸»èŠ‚ç‚¹é¢æ¿" title="ä¸»èŠ‚ç‚¹é¢æ¿"></p>
<h1 id="æ”»å‡»æ•°æ®åˆ†æ"><a href="#æ”»å‡»æ•°æ®åˆ†æ" class="headerlink" title="æ”»å‡»æ•°æ®åˆ†æ"></a>æ”»å‡»æ•°æ®åˆ†æ</h1><p>åˆ†å¸ƒå¼èœœç½éƒ¨ç½²äº†å‡ å¤©åï¼Œæ¥ä¸‹æ¥æ˜¯å¯¹æ•è·çš„æ•°æ®è¿›è¡Œåˆ†æäº†ï¼Œä¸‹é¢ä¸»è¦ä»¥ SSH èœœç½æ”»å‡»è¡Œä¸ºä¸ºä¾‹ã€‚å„ä½å¤§ä½¬ä¹Ÿå¯ä»¥ä»é™„ä»¶é‡Œä¸‹è½½æ•°æ®åº“è‡ªè¡Œåˆ†æã€‚å¾€åå¦‚æœæœ‰èƒ½åŠ›ï¼Œä¼šå®šæœŸæä¾›èœœç½æ•è·æ•°ç»™å„ä½ã€‚</p>
<h2 id="æ”»å‡»å­—å…¸ç»Ÿè®¡"><a href="#æ”»å‡»å­—å…¸ç»Ÿè®¡" class="headerlink" title="æ”»å‡»å­—å…¸ç»Ÿè®¡"></a>æ”»å‡»å­—å…¸ç»Ÿè®¡</h2><p>å…ˆæ¥çœ‹ä¸‹æ•°æ®åº“ hfish_info è¡¨ç»“æ„åŠæ•°æ®ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/sqlite.png" alt="sqliteæ•°æ®åº“è¡¨" title="sqliteæ•°æ®åº“&amp;è¡¨"></p>
<p>å¯ä»¥çœ‹åˆ°æ•°æ®åº“ç”¨ &amp;&amp; æ›¿æ¢æ¢è¡Œç¬¦ï¼Œä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œæ¥ä¸‹æ¥å¯ä»¥å†™ä¸ªç»Ÿè®¡æ”»å‡»å­—å…¸è„šæœ¬ã€‚ä»¥ä¸‹ä¸ºå…³é”®éƒ¨åˆ†ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.hfish_db = <span class="string">'./file/hfish.db'</span></span><br><span class="line">    self.hfish_split = <span class="string">'&amp;&amp;'</span></span><br><span class="line">    self.sql = sqlite3.connect(self.hfish_db)</span><br><span class="line">    <span class="comment">#è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œæµ‹è¯•æ—¶å€™å‘ç°ï¼Œæœ‰äº›å­—ç¬¦æ— æ³•ç”¨utf-8è§£ç ï¼Œæ‰€ä»¥å¾—ç”¨bytes</span></span><br><span class="line">    self.sql.text_factory = bytes</span><br></pre></td></tr></table></figure>

<p>æœç´¢ sqlite æ•°æ®åº“ä¸­æ‰€æœ‰ ssh æ”»å‡»çš„ç±»å‹</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/8.bmp" alt="æœç´¢SSHç±»å‹" title="æœç´¢SSHç±»å‹SQL"></p>
<p>ç„¶ååˆ†å‰² &amp;&amp; ï¼ŒæŠŠç”¨æˆ·åå¯†ç åˆ†å‰²å¼€ï¼Œå¹¶è¾“å‡ºåˆ°æ–‡æœ¬é‡Œé¢</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/9.bmp" alt="è¾“å‡ºåˆ°æ–‡æœ¬" title="è¾“å‡ºåˆ°æ–‡æœ¬"></p>
<p>æ‰“å°ä¸€ä¸‹ç”¨æˆ·ååŠå¯†ç é¢‘æ¬¡</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/10.bmp" alt="æ‰“å°å­—å…¸é¢‘æ¬¡" title="å­—å…¸é¢‘æ¬¡"></p>
<p>å–ç”¨æˆ·ååŠå¯†ç å‡ºç°æ¬¡æ•°top10 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‰å­—å…¸å€¼ååºæ’åº,æ–¹æ³•ä¸€</span></span><br><span class="line">user = sorted(user_pwd_dic[<span class="string">'user'</span>].items(), key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># æŒ‰å­—å…¸å€¼ååºæ’åº,æ–¹æ³•äºŒ</span></span><br><span class="line">password = list(user_pwd_dic[<span class="string">'pwd'</span>].items())</span><br><span class="line">password.sort(key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>å°†ç»“æœæ‰“å°</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/dic_sum.png" alt="å­—å…¸é¢‘æ¬¡æ‰“å°" title="æ‰“å°"></p>
<p>å…¶å®å­—å…¸å…·æœ‰åœ°åŸŸæ€§ï¼Œå¯ä»¥æ ¹æ®æ”»å‡»å­—å…¸åœ°åŸŸæ€§ï¼Œé…ç½®ä¸‹èœœç½ï¼Œç”±äºé»˜è®¤èœœç½è´¦æˆ·å¯†ç å‡ä¸ºrootï¼Œä¸åœ¨å¸¸è§å¤–ç½‘çˆ†ç ´æ”»å‡»å­—å…¸é‡Œï¼Œæ‰€ä»¥åç»­å¾ˆå¤šæ”»å‡»éƒ½æ— æ³•è¿›è¡Œã€‚</p>
<h2 id="å­—å…¸åœ°åŸŸæ€§åˆ†æ"><a href="#å­—å…¸åœ°åŸŸæ€§åˆ†æ" class="headerlink" title="å­—å…¸åœ°åŸŸæ€§åˆ†æ"></a>å­—å…¸åœ°åŸŸæ€§åˆ†æ</h2><p>æ¥ä¸‹æ¥åˆ†æä¸€ä¸‹å„ä¸ªå›½å®¶çš„èœœç½æ”¶é›†åˆ°çš„å­—å…¸å·®å¼‚ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RegionDic</span><span class="params">(self)</span>:</span></span><br><span class="line">    agent_sql = <span class="string">"select agent from hfish_info"</span></span><br><span class="line">    data = self.sql.execute(agent_sql).fetchall()</span><br><span class="line">    agents = []</span><br><span class="line">    <span class="keyword">for</span> agent <span class="keyword">in</span> list(set(data)):</span><br><span class="line">        agents.append(agent[<span class="number">0</span>].decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">    agents_dic = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> agent <span class="keyword">in</span> agents:</span><br><span class="line">        agents_dic[agent] = &#123;&#125;</span><br><span class="line">        data = self.sql.execute(dic_sql_tpl.format(agent)).fetchall()</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">            <span class="keyword">if</span> d[<span class="number">0</span>] <span class="keyword">in</span> agents_dic[agent].keys():</span><br><span class="line">                agents_dic[agent][d[<span class="number">0</span>]] = agents_dic[agent][d[<span class="number">0</span>]] + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                agents_dic[agent][d[<span class="number">0</span>]] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        agents_dic[agent] = sorted(agents_dic[agent].items(), key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> agent <span class="keyword">in</span> agents:</span><br><span class="line">        print(agent)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">            <span class="comment">#è¿™é‡Œä¸ç›´æ¥ç”¨decode utf-8 æ˜¯å› ä¸ºæ•è·åˆ°çš„ä¸€äº›å­—ç¬¦æ— æ³•ç”¨utf-8è§£ç ï¼Œè¿™ä¸ªåœ¨ä¸Šä¸€èŠ‚è¿æ¥æ•°æ®åº“é‡Œé¢æœ‰æåˆ°ã€‚</span></span><br><span class="line">            print(<span class="string">"%s\t\t%s"</span>%(str(agents_dic[agent][i][<span class="number">0</span>]).replace(<span class="string">"b'"</span>,<span class="string">''</span>).replace(<span class="string">"'"</span>,<span class="string">''</span>), agents_dic[agent][i][<span class="number">1</span>]))</span><br><span class="line">        print()</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/region_dic.png" alt="å­—å…¸åœ°åŸŸæ€§" title="å­—å…¸çš„åœ°åŸŸæ€§"></p>
<p>ä½¿ç”¨ pyecharts ç”Ÿæˆå›¾è¡¨ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    bar = (Bar(options.InitOpts(width=<span class="string">'1000px'</span>, height=<span class="string">'500px'</span>))</span><br><span class="line">           .add_xaxis(u_p_dic)</span><br><span class="line">           .add_yaxis(agent, u_p_count)</span><br><span class="line">           .set_global_opts(</span><br><span class="line">        title_opts=options.TitleOpts(title=(<span class="string">"%sç»Ÿè®¡"</span>%agent))</span><br><span class="line">            )</span><br><span class="line">           )</span><br><span class="line">    tab.add(bar, agent)</span><br><span class="line">tab.render()</span><br></pre></td></tr></table></figure>

<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/chart.png" alt="å­—å…¸å›¾è¡¨" title="chart"></p>
<p>è¿™é‡Œå¢™è£‚æ¨èç›´æ¥çœ‹ pyecharts å®˜æ–¹æ–‡æ¡£ï¼Œç‰¹åˆ«è¯¦ç»†å…¨é¢ï¼Œä¸è¦æœCSDNé‡Œé¢çš„åšå®¢ï¼Œä¸å¿åæ§½æŸäº›åšæ–‡ã€‚</p>
<p><em>å› ä¸ºæ”¶é›†æ—¶é—´ä¸é•¿ï¼Œä¸”å­èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹é€šä¿¡è«åä¸­æ–­ï¼Œæ­¤ç»“æœä¸å…·æœ‰æ™®éæ€§</em></p>
<p><em>è¿™é‡Œåªæ˜¯ç®€å•æå–æ”»å‡»å­—å…¸ï¼Œå¹¶æ²¡æœ‰åšæ›´æ·±å…¥åˆ†æï¼Œå„ä½å¯ä»¥é€šè¿‡åé¢é™„ä»¶ä¸‹è½½ï¼Œè‡ªè¡Œåˆ†æã€‚</em></p>
<p><em>åé¢ä¼šæ ¹æ®å­—å…¸çš„åœ°åŸŸæ€§ï¼Œåœ¨éƒ¨ç½²èœœç½çš„æ—¶å€™ï¼Œä¿®æ”¹ç‰¹å®šçš„æ ‡è‡´</em></p>
<h1 id="èœœç½æ£€æµ‹"><a href="#èœœç½æ£€æµ‹" class="headerlink" title="èœœç½æ£€æµ‹"></a>èœœç½æ£€æµ‹</h1><h2 id="åŸºäºæµé‡è¯†åˆ«"><a href="#åŸºäºæµé‡è¯†åˆ«" class="headerlink" title="åŸºäºæµé‡è¯†åˆ«"></a>åŸºäºæµé‡è¯†åˆ«</h2><p>è¿™é‡Œä»¥æ”»å‡»è€…åœ¨å†…ç½‘ï¼Œä¸”èœœç½æ˜¯ä»¥åˆ†å¸ƒå¼éƒ¨ç½²æƒ…å†µä½œä¸ºç¤ºä¾‹ï¼Œæ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/11.bmp" alt="å†…ç½‘æ‹“æ‰‘å›¾" title="å†…ç½‘æ‹“æ‰‘å›¾"></p>
<p>ä½¿ç”¨ tcpdump dumpæ•°æ®åŒ…ï¼Œwireshark æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°å­èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä»¥æ˜æ–‡ä¼ è¾“ï¼Œä¸”æœ‰æ˜æ˜¾çš„ç‰¹å¾</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/12.bmp" alt="wireshark" title="wireshark"></p>
<p>ä½¿ç”¨scapy è¯†åˆ«ä¸»èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„åœ°å€ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/13.bmp" alt="scapy" title="scapyä»£ç "></p>
<p>å­˜åœ¨é—®é¢˜çš„ä»£ç åœ¨ /core/rpc/client/client.go</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/report.png" alt="report bug" title="report bug"></p>
<p><em>åœ¨å†…ç½‘æ¸—é€è¿‡ç¨‹ä¸­ï¼Œå¦‚æœèƒ½å‘ç°éƒ¨ç½²çš„èœœç½ï¼Œå¯ä»¥é™ä½è¢«å‘ç°å¯èƒ½æ€§ã€‚</em></p>
<h2 id="åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«"><a href="#åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«" class="headerlink" title="åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«"></a>åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«</h2><p>hfish é«˜äº¤äº’å¼èœœç½æ˜¯æ ¹æ®ç‰¹å¾å­—ç¬¦å›æ˜¾ï¼ŒåŒ¹é…çš„è§„åˆ™æœ‰é™ï¼Œæ¯”å¦‚å¸¸è§çš„è¯»å– passwd é€šå¸¸ä½¿ç”¨ cat /etc/passwd ï¼Œåœ¨SSHè§„åˆ™é‡Œæœ‰ç›¸åº”çš„è§„åˆ™</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/14.bmp" alt="sshèœœç½é…ç½®" title="sshèœœç½é…ç½®"></p>
<p>å¦‚æœå˜å½¢ä½¿ç”¨ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd &amp;</span><br></pre></td></tr></table></figure>

<p> æˆ–è€… </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail /etc/passwd</span><br></pre></td></tr></table></figure>

<p>åœ¨æ­£å¸¸çš„ vps é‡Œé¢ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¯»å–åˆ° passwd çš„å†…å®¹ï¼Œ</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/15.bmp" alt="å˜å½¢shell" title="å˜å½¢shell"></p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/16.bmp" alt="å˜å½¢shell2" title="å˜å½¢shell2"></p>
<p>ä½†å¦‚æœåœ¨èœœç½é‡Œé¢ï¼Œåˆ™ä¼šæ˜¾ç¤ºå¼‚å¸¸ï¼Œæœªä¿®æ”¹é…ç½®çš„æƒ…å†µä¸‹æ˜¯ test .</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/17.bmp" alt="èœœç½å›æ˜¾" title="èœœç½å›æ˜¾"></p>
<p><em>åŸºäºå­—ç¬¦åŒ¹é…çš„è§„åˆ™ï¼Œæ€»ä¼šæœ‰é—æ¼çš„åœ°æ–¹ï¼Œå¯ä»¥å°è¯•å˜å½¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦æ˜¯hfishèœœç½ã€‚</em></p>
<p>é«˜äº¤äº’å¼èœœç½çš„é…ç½®æ–‡ä»¶åœ¨ç›¸åº”çš„ libs/èœœç½ç±»å‹/ ä¸‹é¢ï¼Œé»˜è®¤default å€¼åœ¨ libs/èœœç½ç±»å‹/default.hf ã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/18.bmp" alt="èœœç½defaulté…ç½®" title="èœœç½defaulté…ç½®"></p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/19.bmp" alt="èœœç½defaulté…ç½®å€¼" title="èœœç½defaulté…ç½®å€¼"></p>
<h2 id="åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«"><a href="#åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«" class="headerlink" title="åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«"></a>åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«</h2><p>è¿™ä¸ªå¾ˆå¥½ç†è§£äº†ï¼Œå¦‚æœè¿”å›åŒ…å«ç®¡ç†é¡µé¢ç‰¹å¾å­—ç¬¦å°±å¯ä»¥åˆ¤æ–­äº†ï¼Œè¿™é‡Œå°±ç›´æ¥ç»™å‡º POC äº†ã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/hfish_http.png" alt="HFish_http" title="HFish ç®¡ç†ç«¯è¯†åˆ«"></p>
<h2 id="éæˆæƒæ¥å£è·å–ä¿¡æ¯"><a href="#éæˆæƒæ¥å£è·å–ä¿¡æ¯" class="headerlink" title="éæˆæƒæ¥å£è·å–ä¿¡æ¯"></a>éæˆæƒæ¥å£è·å–ä¿¡æ¯</h2><p>é—®é¢˜ä»£ç åœ¨ /view/url.go æ–‡ä»¶ä¸­</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/api_code.png" alt="api_code" title="api æ¼æ´ä»£ç "></p>
<p>å¯ä»¥å‘ç°ï¼Œè¿™é‡Œè¿èº«ä»½é‰´åˆ«éƒ½æ²¡ä½œï¼Œå½“è·å–åˆ°ä¸»æœºç‚¹ipåŠç«¯å£åï¼Œç›´æ¥è¯·æ±‚uriï¼Œå°±å¯ä»¥è·å–èœœç½æ•è·çš„ä¿¡æ¯ï¼Œä»è€Œåˆ†æèœœç½ä½ç½®ã€‚</p>
<p>éªŒè¯POCï¼š</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://ip:port/api/v1/get/ip</span><br><span class="line">http://ip:port/api/v1/get/fish_info</span><br></pre></td></tr></table></figure>

<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/api_bp_1.png" alt="api_bp_1" title="éæˆæƒè®¿é—®api"></p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/api_bp_2.png" alt="api_bp_2" title="éæˆæƒè®¿é—®api"></p>
<h1 id="èœœç½æ”»å‡»"><a href="#èœœç½æ”»å‡»" class="headerlink" title="èœœç½æ”»å‡»"></a>èœœç½æ”»å‡»</h1><h2 id="éæˆæƒæ”»å‡»"><a href="#éæˆæƒæ”»å‡»" class="headerlink" title="éæˆæƒæ”»å‡»"></a>éæˆæƒæ”»å‡»</h2><p>æŸ¥çœ‹ä¸‹ä¸»èŠ‚ç‚¹é¢æ¿æŸ¥è¯¢ä¼ è¾“çš„æ•°æ®åŒ…ï¼Œç”¨æˆ·è®¤è¯æ˜¯é€šè¿‡åï¼Œis_login çš„å€¼å°±æ˜¯ç™»é™†ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥çˆ†ç ´è¿™ä¸ªç”¨æˆ·ï¼Œç»•è¿‡ç™»é™†ï¼Œç›´æ¥è®¾ç½®åç«¯å„ç§å‚æ•°ï¼Œæ¯”å¦‚å°†æŠ¥è­¦å‚æ•°ç½®ä¸ºç©ºã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/20.bmp" alt="master_bp" title="master_bp"></p>
<p>å¯¹åº”çš„é—®é¢˜æºç åœ¨ /view/login/view.go é‡Œ</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/21.bmp" alt="é—®é¢˜æºç " title="é—®é¢˜æºç "></p>
<p>æ›´æ–°æŠ¥è­¦é‚®ä»¶çš„å…·ä½“é…ç½®å‚æ•°åœ¨ /view/setting/view.go é‡Œé¢ï¼Œç¦æ­¢æŠ¥è­¦ poc å°±ä¸ç»™å‡ºäº†ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹å¯¹åº”å‚æ•°ã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/22.bmp" alt="æŠ¥è­¦å‚æ•°" title="æŠ¥è­¦å‚æ•°"></p>
<h2 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a>å­˜å‚¨å‹XSS</h2><p>è¿™ä¸ªæ¼æ´æ˜¯æŸä½ä¸æ„¿æä¾›IDå¤§ä½¬æé†’çš„ğŸ˜ã€‚</p>
<p>å› ä¸ºè¿™æ¼æ´æ˜¯åå°å±•ç¤ºçš„åŸå› ï¼Œæ‰€ä»¥ä»»ä½•ä¸€ä¸ªèœœç½éƒ½å¯ä»¥è§¦å‘è¿™ä¸ªæ¼æ´ï¼Œè¿™é‡Œä»¥ ssh èœœç½æ¼”ç¤ºã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹payloadè¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh ^&lt;script^&gt;alert^(1234^)^&lt;^/script^&gt;@192.168.99.101 -p 2222</span><br></pre></td></tr></table></figure>

<p><em>æˆ‘ä½¿ç”¨çš„æ˜¯windowç³»ç»Ÿï¼Œéœ€è¦ç”¨ ^ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦</em></p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/xss_ssh.png" alt="ssh_payload" title="ssh payload"></p>
<p>æäº¤ä¹‹åï¼Œè¿”å› ä¸Šé’©åˆ—è¡¨ ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸæ‰§è¡Œxssã€‚</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/xss_alert.png" alt="xss" title="xss"></p>
<h1 id="ç‰¹æ€§åŒ–é…ç½®"><a href="#ç‰¹æ€§åŒ–é…ç½®" class="headerlink" title="ç‰¹æ€§åŒ–é…ç½®"></a>ç‰¹æ€§åŒ–é…ç½®</h1><p>è¿™é‡Œä»¥æ”»å‡»å­—å…¸åœ°åŸŸæ€§ç‰¹ç‚¹åŠèœœç½æ£€æµ‹ä¸­çš„äº¤äº’å¼è¿”å›å†…å®¹ç¼ºé™·ï¼Œç‰¹æ€§åŒ–é…ç½®èœœç½ã€‚</p>
<h2 id="æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®"><a href="#æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®" class="headerlink" title="æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®"></a>æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®</h2><p>å°†ç”¨æˆ·åã€å¯†ç ä¿®æ”¹ä¸ºç»Ÿè®¡çš„å­—å…¸å‡ºç°é¢‘ç‡æœ€é«˜çš„å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›¿æ¢å¯†ç å’Œç”¨æˆ·å</span></span><br><span class="line">set_user_tpl = <span class="string">'sed -i "s/\\"account\\": \\"root\\"/\\"account\\": \\"&#123;&#125;\\"/g" %s'</span>%ssh_conf_path</span><br><span class="line">set_pwd_tpl = <span class="string">'sed -i "s/\\"password\\": \\"root\\"/\\"password\\": \\"&#123;&#125;\\"/g" %s'</span>%ssh_conf_path</span><br></pre></td></tr></table></figure>

<h2 id="é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹"><a href="#é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹" class="headerlink" title="é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹"></a>é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹</h2><p>å’±ä»¬ç”¨ä¸€å°Ubuntu çš„vpsæµ‹è¯•ä¸€ä¸‹ï¼ŒæœªçŸ¥çš„å‘½ä»¤è¿”å›ï¼š</p>
<p><img src="/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/unknow.png" alt="unknow" title="æœªçŸ¥çš„å‘½ä»¤"></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé»˜è®¤è¿”å›ä¿®æ”¹ä¸ºâ€command not foundâ€çš„è¯ï¼Œå¯ä»¥ç¨å¾®æ”¹å–„ä¸‹è¿”å›ç»“æœã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_default_tpl = <span class="string">'sed -i "s/test/: command not found/g" %s'</span>%ssh_default_path</span><br></pre></td></tr></table></figure>

<h1 id="è‡´è°¢"><a href="#è‡´è°¢" class="headerlink" title="è‡´è°¢"></a>è‡´è°¢</h1><p>æ„Ÿè°¢ä¸‰æ–¤å¤§ä½¬è§£æƒ‘ã€‚</p>
<p>HFish æ˜¯ä¸€æ¬¾éå¸¸ä¸é”™çš„é«˜äº¤äº’å¼èœœç½ï¼Œå¯æ‰©å±•æ€§å¥½ï¼Œå¯ä»¥å¸®å¿™ç‚¹å‡»ä¸€ä¸‹ startï¼Œæ”¯æŒä¸€ä¸‹å›½äº§èœœç½ã€‚</p>
<p><a href="https://github.com/hacklcx/HFish" target="_blank" rel="noopener">HFish github</a></p>
<p><a href="https://hfish.io/docs/" target="_blank" rel="noopener">HFish document</a></p>
<p><em>é™„ä»¶</em></p>
<p><a href="https://github.com/cyker/HFishDB/blob/master/db/hfish.7z" target="_blank" rel="noopener">sqliteæ•°æ®åº“</a></p>
<p><a href="https://github.com/cyker/HFishDB" target="_blank" rel="noopener">HFishæ•°æ®åº“githubåœ°å€</a></p>
<p><a href="https://github.com/cyker/HFishDB/blob/master/user.txt" target="_blank" rel="noopener">æ”»å‡»ç”¨æˆ·åå­—å…¸</a></p>
<p><a href="https://github.com/cyker/HFishDB/blob/master/passw'/d.txt" target="_blank" rel="noopener">æ”»å‡»å¯†ç å­—å…¸</a></p>
<p><a href="https://github.com/cyker/HFishDB/blob/master/render.txt" target="_blank" rel="noopener">åœ°åŸŸå­—å…¸ç»Ÿè®¡å›¾è¡¨</a></p>
</div><div class="post-copyright"><blockquote><p>åŸæ–‡ä½œè€…: Ciker</p><p>åŸæ–‡é“¾æ¥: <a href="https://blog.c1ker.top/2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/">https://blog.c1ker.top/2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/</a></p><p>ç‰ˆæƒå£°æ˜: è½¬è½½è¯·æ³¨æ˜å‡ºå¤„(å¿…é¡»ä¿ç•™ä½œè€…ç½²ååŠé“¾æ¥)</p></blockquote></div><div class="tags"><a href="/tags/ç½‘ç»œ/">ç½‘ç»œ</a><a href="/tags/èœœç½/">èœœç½</a></div><div class="post-share"><div class="social-share"><span>åˆ†äº«åˆ°:</span></div></div><div class="post-nav"><a href="/2019/07/29/é›ªç¢§å›¾çˆ¬è™«/" class="next">é›ªç¢§å›¾çˆ¬è™«</a></div><div id="comments"><div id="SOHUCS" sid="2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/"></div><div id="container"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.4"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.4"></script><script>var gitalk = new Gitalk({
  clientID: '',
  clientSecret: '',
  repo: '',
  owner: '',
  admin: [''],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-CN',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">æ–‡ç« ç›®å½•</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#éƒ¨ç½²"><span class="toc-text">éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å•èŠ‚ç‚¹éƒ¨ç½²"><span class="toc-text">å•èŠ‚ç‚¹éƒ¨ç½²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ†å¸ƒå¼éƒ¨ç½²"><span class="toc-text">åˆ†å¸ƒå¼éƒ¨ç½²</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ”»å‡»æ•°æ®åˆ†æ"><span class="toc-text">æ”»å‡»æ•°æ®åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ”»å‡»å­—å…¸ç»Ÿè®¡"><span class="toc-text">æ”»å‡»å­—å…¸ç»Ÿè®¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å­—å…¸åœ°åŸŸæ€§åˆ†æ"><span class="toc-text">å­—å…¸åœ°åŸŸæ€§åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#èœœç½æ£€æµ‹"><span class="toc-text">èœœç½æ£€æµ‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºäºæµé‡è¯†åˆ«"><span class="toc-text">åŸºäºæµé‡è¯†åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«"><span class="toc-text">åŸºäºé«˜äº¤äº’èœœç½è¿”å›å†…å®¹è¯†åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«"><span class="toc-text">åŸºäºç®¡ç†ç«¯å£è¿”å›å†…å®¹è¯†åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éæˆæƒæ¥å£è·å–ä¿¡æ¯"><span class="toc-text">éæˆæƒæ¥å£è·å–ä¿¡æ¯</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#èœœç½æ”»å‡»"><span class="toc-text">èœœç½æ”»å‡»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#éæˆæƒæ”»å‡»"><span class="toc-text">éæˆæƒæ”»å‡»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å­˜å‚¨å‹XSS"><span class="toc-text">å­˜å‚¨å‹XSS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ç‰¹æ€§åŒ–é…ç½®"><span class="toc-text">ç‰¹æ€§åŒ–é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®"><span class="toc-text">æ ¹æ®åœ°åŸŸï¼Œç‰¹æ€§åŒ–èœœç½é…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹"><span class="toc-text">é«˜äº¤äº’å¼èœœç½é»˜è®¤è¿”å›ä¿®æ”¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è‡´è°¢"><span class="toc-text">è‡´è°¢</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> æœ€æ–°æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/15/HFish-èœœç½ä½¿ç”¨å¿ƒå¾—/">HFish èœœç½ä½¿ç”¨å¿ƒå¾—</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/29/é›ªç¢§å›¾çˆ¬è™«/">é›ªç¢§å›¾çˆ¬è™«</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/hello-wolrd/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexoåšå®¢æŠ˜è…¾/">hexoåšå®¢æŠ˜è…¾</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/èœœç½/">èœœç½</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/é›ªç¢§å›¾/">é›ªç¢§å›¾</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/çˆ¬è™«/" style="font-size: 15px;">çˆ¬è™«</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/ç½‘ç»œ/" style="font-size: 15px;">ç½‘ç»œ</a> <a href="/tags/èœœç½/" style="font-size: 15px;">èœœç½</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> å½’æ¡£</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">ç½‘ç«™åœ°å›¾</a> |  <a href="/atom.xml">è®¢é˜…æœ¬ç«™</a> |  <a href="/about/">è”ç³»åšä¸»</a></p><p>æœ¬ç«™æ€»è®¿é—®é‡ï¼š<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>æ¬¡ï¼Œæœ¬ç«™æ€»è®¿å®¢æ•°:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>äºº</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Ciker.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script><script>window._config = { showScore: true };
(function(){ 
  var appid = 'cyuCtTnMY'; 
  var conf = '1d96191e9c2e5c3f7ac6773a3d43c233'; 
  var width = window.innerWidth || document.documentElement.clientWidth; 
  var nodes =document.getElementsByTagName("head")[0]||document.head||document.documentElement;
  if (/(Android|iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent) && width < 750) {  
      window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>');
  }
  else { 
    var loadJs=function(d,a){
      var b=document.createElement("script");b.setAttribute("type","text/javascript");
      b.setAttribute("charset","UTF-8");
      b.setAttribute("src",d);
      if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}
      nodes.appendChild(b)
    };
    loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
  } 
  var loadCss = function(cssString){  
    var style=document.createElement("style");  
    style.setAttribute("type", "text/css");  
    if(style.styleSheet){// IE  
        style.styleSheet.cssText = cssString;  
    } else {// w3c  
        var cssText = document.createTextNode(cssString);  
        style.appendChild(cssText);  
    }
    nodes.appendChild(style);
  }
  //- window.onload=function(){
  //-   if(window.outerWidth<=775){
  //-     loadCss('.module-hot-topic,.module-cmt-float-bar{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .cbox-prompt-w span.prompt-empty-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w .form-text-w span.text-null,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w a.comment-link-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w span.comment-text-w,#SOHUCS #SOHU_MAIN .module-cmt-footer .section-service-w div.service-wrap-w a:hover,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w span.wrap-name-w,#SOHUCS #SOHU_MAIN .module-cmt-list .action-click-gw span.click-disable-eg a em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li div.title-name-gw,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number .comment-number span.cy-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number span.comment-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active,#SOHUCS #SOHU_MAIN .module-cmt-list .msg-wrap-gw .wrap-action-gw .action-click-gw span a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .picture-box-gw div.box-action-gw a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-action-gw .action-click-gw span a:hover em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-user-gw span.user-name-gw a{color:#40759b!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-r,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-l,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-r{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-l{background:#FFF!important;top:-2px!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-function-w .uploading-wrapper-dw div.wrapper-image-dw,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-main,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w div.form-text-w,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-list .module-cmt-box .post-wrap-w div.post-wrap-main{border:1px solid #e6e6e6!important;border-radius:20px 20px 20px 20px;margin:0!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw{width:130px!important;height:34px!important;line-height:33px!important;font-size:17px!important;background:#5483b1!important;border-radius:20px!important;color:#FFF!important;-webkit-box-shadow:0 -1px 4px #5483b1 inset;box-shadow:0 -1px 10px #5483b1 inset}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw:before{content:"å‘è¡¨è¯„è®º"}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a:hover .btn-fw{color:#40759b!important;background:#FFF!important}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li{background:none!important;border-bottom:1px solid #e6e6e6}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active{border:1px solid #e6e6e6;border-radius:10px 10px 0 0;border-bottom:none}#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li .title-name-gw div.title-name-gw-tag{background:#5483b1!important;border-radius:3px}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type div.cmt-list-border{background-color:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item{border:1px solid #e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo{text-align:center;line-height:40px;border-radius:50%!important;background:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo:before{content:"ç•…";font-size:22px;color:#FFF}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text,#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text i{color:#5483b1!important}#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w{background:#FFF!important}@media screen and (min-width:900px){#SOHUCS #SOHU_MAIN .module-mobile-cmt-list .list-wrapper-wap .list-container-wap .list-item-wap .list-content-wrapper-wap .cmt-list-image-container .cmt-list-image{max-width: 100%;}}');
  //-   }
  //- };
})();
function removeElement(_element){
     var _parentElement = _element.parentNode;
     if(_parentElement){
            _parentElement.removeChild(_element);
     }
}
var removeAD = document.createElement("div");
removeAD.id = 'removeAD';
var adInterval1 = setInterval(function() {
  if(document.querySelector("#feedAv")){
    document.querySelector("[node-type=cmt-list]").appendChild(removeAD);
    document.querySelector("#removeAD").appendChild(document.querySelector("#feedAv"));
    //- removeElement(document.querySelectorAll("#feedAv")[0]);
    var feedAv = document.querySelector("#feedAv").children;
    for( item of feedAv){
      item.style.display = 'none'
    }
    document.querySelector("#removeAD").style.display="none"
    clearInterval(adInterval1);
  }
},1000);
var adInterval2 = setInterval(function() {
  if(document.querySelector("#pop_ad")){
    removeElement(document.querySelector("#pop_ad"));
    clearInterval(adInterval2);
  }
}, 1000);</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>